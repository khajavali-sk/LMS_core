{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
  <h2>{{ course.title }}</h2>
  <p>{{ course.description }}</p>
  
  <!-- Enrollment Section -->
  {% if not is_enrolled %}
    <form action="{% url 'courses:enroll_course' course.id %}" method="post">
      {% csrf_token %}
      <button type="submit" class="btn btn-primary">Enroll Now</button>
    </form>
  {% else %}
    <p class="text-success">You are enrolled in this course!</p>
  {% endif %}
  
  <!-- Progress Bar (only if enrolled) -->
  {% if is_enrolled %}
    <h4>Your Progress</h4>
    <div class="progress mb-3">
      <div class="progress-bar" role="progressbar" style="width: {{ progress }}%;" aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100">
        {{ progress }}%
      </div>
    </div>
  {% endif %}
  
  <!-- Enrollment Count -->
  <p>Total Enrollments: {{ enrollment_count }}</p>
  
  <!-- (Optional) List modules/lessons here -->
</div>
{% endblock %}
